{% extends 'base.html.twig' %}

{% block title %}Restaurants{% endblock %}

{% block body %}
    <h1>Restaurants</h1>

    <ul>
        {% for restaurant in restaurants %}
            <li>
                <strong>{{ restaurant.nom }}</strong><br>
                <em>{{ restaurant.adresse }}</em><br>
                <em>Category: {{ restaurant.categorie }}</em><br>

                {% if restaurant.menus|length > 0 %}
                    <a href="{{ path('user_start_command', { 'restaurantId': restaurant.id }) }}" class="btn btn-primary">
                        <button>Commander</button>
                    </a>
                    <a href="{{ path('restaurant_menu', {'id': restaurant.id}) }}">
                        <button>Voir menu</button>
                    </a>
                {% else %}
                    <p>Pas de menus disponible pour ce restaurant</p>
                {% endif %}

                {% if app.user is not null and restaurant.user == app.user %}
                    <a href="{{ path('restaurant_manage', {'id': restaurant.id}) }}">
                        <button>GÃ©rer le restaurant</button>
                    </a>
                {% endif %}
            </li>
        {% endfor %}
    </ul>

    {% if app.user and app.user.restaurant is null %}
        <a href="{{ path('restaurant_create') }}">
            <button>CrÃ©er un restaurant</button>
        </a>
    {% endif %}
{% endblock %}